<div class="card">
  <mat-card class="example-card">
    <mat-card-title class="title">Log In </mat-card-title>

    <div>
      <section align="end">
        <mat-button-toggle-group #group="matButtonToggleGroup">
          <mat-button-toggle (click)="openMail()">Email</mat-button-toggle>
          <mat-button-toggle (click)="openPhone()">Phone</mat-button-toggle>
        </mat-button-toggle-group>
      </section>
    </div>

    <form #loginform="ngForm" (ngSubmit)="onsubmit(loginform)">
      <mat-card-content>
        <ng-container *ngIf="Emailfield">
          <mat-form-field appearance="legacy" class="example-full-width">
            <mat-label for="email">Email</mat-label>
            <mat-icon matPrefix>mail</mat-icon>
            <input matInput type="email" name="email" placeholder="Enter your email"
              pattern="^[a-z0-9]+@[a-z0-9]+\.[a-z]{2,4}$" #email="ngModel" ngModel required />
            <mat-error *ngIf="email.invalid && email.touched && !email.errors?.['pattern']">Email is required
            </mat-error>
            <mat-error *ngIf="email.errors?.['pattern']">Enter a valid email address</mat-error>
          </mat-form-field>

          <mat-form-field appearance="legacy" class="example-full-width">
            <mat-label for="password">Password</mat-label>
            <mat-icon matPrefix>key</mat-icon>
            <input matInput [type]="hide ? 'password' : 'text'" name="password" minlength="6" #password="ngModel"
              placeholder="Enter your Password" ngModel required />
            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" type="button"
              [attr.aria-pressed]="hide">
              <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
            </button>
            <mat-error *ngIf="password.invalid && password.touched">
              <mat-error *ngIf="password.errors?.['required']">Password is required</mat-error>
              <mat-error *ngIf="password.errors?.['minlength']">Password must be 6 characters long</mat-error>
            </mat-error>
          </mat-form-field>

        </ng-container>

        <ng-container *ngIf="!Emailfield">
          <mat-form-field appearance="legacy" class="example-full-width">
            <mat-label for="phone">Phone No.</mat-label>
            <mat-icon matPrefix>phone</mat-icon>
            <input matInput type="number" name="phone" placeholder="Enter your phone number" pattern="^[0-9\-]*$"
              #phone="ngModel" ngModel required />
            <mat-error *ngIf="phone.invalid && phone.touched && !phone.errors?.['pattern']">phone is required
            </mat-error>
            <mat-error *ngIf="phone.errors?.['pattern']">Enter a valid phone address</mat-error>
          </mat-form-field>

          <mat-form-field appearance="legacy" class="example-full-width">
            <mat-label for="password">Password</mat-label>
            <mat-icon matPrefix>key</mat-icon>
            <input matInput [type]="hide ? 'password' : 'text'" name="password" minlength="6" #password="ngModel"
              placeholder="Enter your Password" ngModel required />
            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" type="button"
              [attr.aria-pressed]="hide">
              <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
            </button>
            <mat-error *ngIf="password.invalid && password.touched">
              <mat-error *ngIf="password.errors?.['required']">Password is required</mat-error>
              <mat-error *ngIf="password.errors?.['minlength']">Password must be 6 characters long</mat-error>
            </mat-error>
          </mat-form-field>
        </ng-container>
      </mat-card-content>

      <mat-card-actions class="center">
        <button mat-raised-button color="accent" type="submit" [disabled]="!loginform.valid">
          Login
        </button>
      </mat-card-actions>

    <div class="tabs">
        <a routerLink="/auth/register" class="link">New User?</a>
        <a href="/auth/forgotPass" class="link">Forgot Password?</a>
      </div>

      <mat-divider class="divider"></mat-divider>

      <mat-card-actions class="google">
        <button mat-raised-button  (click)="loginwithG()">
          <img src="assets/googleLogo.png" alt="google logo" class="logo" />
        </button>
      </mat-card-actions>
    </form>

    <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

  </mat-card>
</div>
